<script>
    const form = document.getElementById('uploadForm');
    const resultsDiv = document.getElementById('results');
  
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      resultsDiv.innerHTML = '<div class="text-center text-gray-500">Running...</div>';
  
      try {
        const res = await fetch('/run', {
          method: 'POST',
          body: formData
        });
  
        const data = await res.json();
  
        if (!Array.isArray(data)) {
          resultsDiv.innerHTML = '<div class="text-red-500">Unexpected response from server.</div>';
          console.log('Response:', data);
          return;
        }
  
        resultsDiv.innerHTML = data.map(item => `
          <div class="bg-white border rounded-xl px-4 py-2 shadow-sm">
            <strong>${item.url}</strong>: ${item.status}
          </div>
        `).join('');
      } catch (err) {
        resultsDiv.innerHTML = '<div class="text-red-500">Error contacting server.</div>';
        console.error(err);
      }
    });
  </script>
  